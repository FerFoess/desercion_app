{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <div class="row">
    <!-- Tabla: Coeficientes del Modelo -->
    <div class="col-md-6">
      <h5 class="mb-3">Coeficientes del Modelo</h5>
      <table class="table table-bordered table-striped table-sm">
        <thead class="table-light">
          <tr>
            <th>Variable</th>
            <th>Valor del Modelo</th>
          </tr>
        </thead>
        <tbody>
          {% for variable, valor in coeficientes %}
            <tr>
              <td>{{ variable }}</td>
              <td>{{ '%.4f' % valor }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Tabla: Interpretación Humana -->
    <div class="col-md-6">
      <h5 class="mb-3">Interpretación Humana</h5>
      <table class="table table-bordered table-hover table-sm">
        <thead class="table-light">
          <tr>
            <th>Variable</th>
            <th>Interpretación Estimada</th>
          </tr>
        </thead>
        <tbody>
          {% for variable, _ in coeficientes %}
            <tr>
              <td>{{ variable }}</td>
              <td>{{ interpretacion.get(variable, "Interpretación no disponible") }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Tabla de predicciones (dinámica por JS si la usas más adelante) -->
  <div class="row mt-4">
    <div class="col">
      <h5>Resultados de Predicción</h5>
      <div id="tabla-filtrada"></div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    fetch('/resultados/datos_json')
      .then(response => response.json())
      .then(data => mostrarTabla(data))
      .catch(error => console.error("Error al obtener los datos:", error));
  });

  function mostrarTabla(datos) {
    if (datos.length === 0) {
      document.getElementById("tabla-filtrada").innerHTML = "<p class='text-muted'>❌ No hay datos disponibles.</p>";
      return;
    }

    const columnas = Object.keys(datos[0]);
    let html = '<table class="table table-striped table-bordered table-sm table-hover align-middle">';
    html += '<thead class="table-light sticky-top"><tr>';
    columnas.forEach(col => html += `<th>${col}</th>`);
    html += '</tr></thead><tbody>';
    datos.forEach(row => {
      html += '<tr>';
      columnas.forEach(col => html += `<td>${row[col]}</td>`);
      html += '</tr>';
    });
    html += '</tbody></table>';
    document.getElementById("tabla-filtrada").innerHTML = html;
  }
</script>
{% endblock %}
